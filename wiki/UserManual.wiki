#summary User manual for the OpenERP/Magento connector
#labels Featured,Phase-Deploy

= Installation =
-------------

To get started you need to install both :
  *the connector module on OpenERP. Use the OpenERP module manager to load the zip file you'll find [http://code.google.com/p/magento-openerp-smile-synchro/downloads/list here]
  *the connector extension for Magento you'll install using Magento Connect Utility. The extension key is to be found on [http://www.magentocommerce.com/extension/446/smile-openerp-synchro here on the Magento Connect repository ]. See installation video here: http://www.youtube.com/v/j70llBqhas4

(Both plugins are actually bundled in the OpenERP module you can download [http://code.google.com/p/magento-openerp-smile-synchro/downloads/list here]. Both module are also on [http://code.google.com/p/magento-openerp-smile-synchro/source/checkout SCM here ].



= Ininitial Configuration =
-------------

http://img68.imageshack.us/img68/6877/openerpscreenshot001ko9.png
_magento interface_

You need to configure website, shop, category, and tax class in OpenERP Client
and Magento Back office.

== _-Website_ ==

	On OpenERP, you need to configure a website Name & Url, the
	magento_id must be set to one.
	The URL must point a the base of your Magento website.

	http://img140.imageshack.us/img140/6471/openerpscreenshot002uk4.jpg

== _-Shop_ ==

	You must configure a shop with the magento_id set to one,
	a price list and a warehouse must be defined for the shop. Ideally in the future we will map each OpenERP shop to a Magento store.

	http://img66.imageshack.us/img66/9836/openerpscreenshot002xv4.png

== _-Category_ ==

	You can synchronize Magento & OpenERP categories, by setting
	the Magento_id on OpenERP categories, corresponding to the Magento
	categories id. But it is not an easy task, since magento database is tricky
        The easiest way is to find yours category ids with this SQL request

{{{
         SELECT 'entity_id'
         FROM `catalog_category_entity_varchar`
         WHERE `value` = 'Category name'
}}}

        with 'Category name' equals to the exact name of the category you defined
        in Magento.
        
        http://img137.imageshack.us/img137/7383/openerpscreenshot0111kq7.jpg

== _Tax Class_ ==
	
	You can synchronize Taxes on the products : 
	When you assign taxes, such as VAT, to a product on OpenERP, you can
	also assign it a tax class id, on magento.
	Then tax class can be applied on the products in magento.

        http://img65.imageshack.us/img65/5547/openerpscreenshot003vr5.png

	You can get the Tax class id, same way you get the categories, 
        via SQL request: 

{{{
        SELECT 'class_id'
        FROM `tax_class`
        WHERE 'class_name'='Tax Class name"
}}}
	
	/!\ Warning
	In Magento > Configuration > Sales > Sales > Tax Calculation
	you must set :
	Catalog prices include tax, to No
	Apply Tax after Discount, to No

       http://img67.imageshack.us/img67/5774/openerpscreenshot007hv1.png

== _-Discount_ ==

	To ensure discount calculation you must change precision, In your database
	(with for instance PGAdmin III) of the "discount" field, in the "sale_order" table
	you can set it to the numeric(16, 4) instead of numeric(16, 2)

        http://magento-openerp-smile-synchro.googlecode.com/files/magento_openerp_rounding.png

== _-Type and Attribute_ ==

        You can synchronize attribute and type on products view
        If not they will take default value.
        
        To retrieve the attribute and type id in magento you'll
        have to use SQL request


=Products synchronization=
------------------------

	The "Products synchronization" wizard will import or/and update the
	products of your OpenERP catalog to Magento Catalog.
	You can't prevent a product to be exported by setting the "exportable"
	field to False on a product (set on True by default).

        http://img67.imageshack.us/img67/3578/openerpscreenshot004qe1.png

=Sale orders synchronization=
---------------------------

== _-Import_ ==
 
	the "import" wizard will import magento orders to OpenERP
	it will also create a partner, with the customer information 
	(if he is not already known) and save his address.
	
== _-Correct_ ==
	
	In the case you import a sale order with a product defined in Magento
	and not known by OpenERP, it will be incomplete, the field "has error" will take 
	the value of 1.
	You can still correct the order by registering the product in OpenERP
	and set the magento id in OpenERP, same the one in Magento, then
	the "correct" wizard will allow you to correct sale order. 

== _-Update_ ==
	
	the "update" wizard will update the state of the order in magento
	for the different states to draft from done.

http://img66.imageshack.us/img66/9176/openerpscreenshot005nn8.png

http://img227.imageshack.us/img227/3866/openerpscreenshot006vc9.png
	